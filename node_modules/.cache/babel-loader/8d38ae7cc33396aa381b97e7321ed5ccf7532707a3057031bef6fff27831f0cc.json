{"ast":null,"code":"var _jsxFileName = \"/home/marissa/react-jokes-classes/src/JokeList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport Joke from './Joke';\nimport './JokeList.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction JokeList({\n  numJokesToGet = 5\n}) {\n  _s();\n  const [jokes, setJokes] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const seenJokes = useRef(new Set());\n  useEffect(() => {\n    const savedJokes = JSON.parse(localStorage.getItem('jokes')) || [];\n    if (savedJokes.length > 0) {\n      setJokes(savedJokes);\n      setIsLoading(false);\n    } else {\n      getJokes();\n    }\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('jokes', JSON.stringify(jokes));\n  }, [jokes]);\n  async function getJokes() {\n    setIsLoading(true);\n    let fetchedJokes = [];\n    while (fetchedJokes.length < numJokesToGet) {\n      let res = await axios.get(\"https://icanhazdadjoke.com\", {\n        headers: {\n          Accept: \"application/json\"\n        }\n      });\n      let {\n        id,\n        joke\n      } = res.data;\n      if (!seenJokes.current.has(id) && !jokes.some(j => j.id === id && j.locked)) {\n        seenJokes.current.add(id);\n        fetchedJokes.push({\n          id,\n          joke,\n          votes: 0,\n          locked: false\n        });\n      }\n    }\n    setJokes(prevJokes => [...prevJokes.filter(joke => joke.locked), ...fetchedJokes]);\n    setIsLoading(false);\n  }\n  function generateNewJokes() {\n    seenJokes.current = new Set(); // FURTHER STUDY - Reset seenJokes to avoid duplicates from previous sessions\n    getJokes();\n  }\n  function resetVotes() {\n    setJokes(jokes.map(joke => ({\n      ...joke,\n      votes: 0\n    })));\n    localStorage.removeItem('jokes'); // Clears local storage\n  }\n  function vote(id, delta) {\n    setJokes(jokes.map(j => j.id === id ? {\n      ...j,\n      votes: j.votes + delta\n    } : j));\n  }\n  function toggleLock(id) {\n    setJokes(jokes.map(j => j.id === id ? {\n      ...j,\n      locked: !j.locked\n    } : j));\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"JokeList\",\n    children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-4x fa-spinner fa-spin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 34\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: generateNewJokes,\n        children: \"Get New Jokes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: resetVotes,\n        children: \"Reset Votes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), jokes.sort((a, b) => b.votes - a.votes).map(joke => /*#__PURE__*/_jsxDEV(Joke, {\n        text: joke.joke,\n        id: joke.id,\n        votes: joke.votes,\n        vote: vote,\n        locked: joke.locked,\n        toggleLock: () => toggleLock(joke.id)\n      }, joke.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(JokeList, \"orkYwgKbz6SfhtQfD+KEbUnHrjQ=\");\n_c = JokeList;\nexport default JokeList;\nvar _c;\n$RefreshReg$(_c, \"JokeList\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","Joke","jsxDEV","_jsxDEV","Fragment","_Fragment","JokeList","numJokesToGet","_s","jokes","setJokes","isLoading","setIsLoading","seenJokes","Set","savedJokes","JSON","parse","localStorage","getItem","length","getJokes","setItem","stringify","fetchedJokes","res","get","headers","Accept","id","joke","data","current","has","some","j","locked","add","push","votes","prevJokes","filter","generateNewJokes","resetVotes","map","removeItem","vote","delta","toggleLock","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","sort","a","b","text","_c","$RefreshReg$"],"sources":["/home/marissa/react-jokes-classes/src/JokeList.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport Joke from './Joke';\nimport './JokeList.css';\n\nfunction JokeList({ numJokesToGet = 5 }) {\n  const [jokes, setJokes] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const seenJokes = useRef(new Set());\n\n  useEffect(() => {\n    const savedJokes = JSON.parse(localStorage.getItem('jokes')) || [];\n    if (savedJokes.length > 0) {\n      setJokes(savedJokes);\n      setIsLoading(false);\n    } else {\n      getJokes();\n    }\n  }, []); \n\n  useEffect(() => {\n    localStorage.setItem('jokes', JSON.stringify(jokes));\n  }, [jokes]);\n\n  async function getJokes() {\n    setIsLoading(true);\n    let fetchedJokes = [];\n    while (fetchedJokes.length < numJokesToGet) {\n      let res = await axios.get(\"https://icanhazdadjoke.com\", {\n        headers: { Accept: \"application/json\" }\n      });\n      let { id, joke } = res.data;\n\n      if (!seenJokes.current.has(id) && !jokes.some(j => j.id === id && j.locked)) {\n        seenJokes.current.add(id);\n        fetchedJokes.push({ id, joke, votes: 0, locked: false });\n      }\n    }\n    setJokes(prevJokes => [...prevJokes.filter(joke => joke.locked), ...fetchedJokes]);\n    setIsLoading(false);\n  }\n\n  function generateNewJokes() {\n    seenJokes.current = new Set(); // FURTHER STUDY - Reset seenJokes to avoid duplicates from previous sessions\n    getJokes();\n  }\n\n  function resetVotes() {\n    setJokes(jokes.map(joke => ({ ...joke, votes: 0 })));\n    localStorage.removeItem('jokes'); // Clears local storage\n  }\n\n  function vote(id, delta) {\n    setJokes(jokes.map(j => j.id === id ? { ...j, votes: j.votes + delta } : j));\n  }\n\n  function toggleLock(id) {\n    setJokes(jokes.map(j => j.id === id ? { ...j, locked: !j.locked } : j));\n  }\n\n  return (\n    <div className=\"JokeList\">\n      {isLoading ? (\n        <div className=\"loading\"><i className=\"fas fa-4x fa-spinner fa-spin\" /></div>\n      ) : (\n        <>\n          <button onClick={generateNewJokes}>Get New Jokes</button>\n          <button onClick={resetVotes}>Reset Votes</button>\n          {jokes.sort((a, b) => b.votes - a.votes).map(joke => (\n            <Joke \n              text={joke.joke} \n              key={joke.id} \n              id={joke.id} \n              votes={joke.votes} \n              vote={vote} \n              locked={joke.locked}\n              toggleLock={() => toggleLock(joke.id)}\n            />\n          ))}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default JokeList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}